<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emmas Icebreakers</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(135deg, #2c3e50, #3498db);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        .game-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            height: 600px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .deck {
            position: relative;
            width: 160px;
            height: 240px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .deck:hover {
            transform: scale(1.05);
        }

        .card {
            position: absolute;
            width: 160px;
            height: 240px;
            border-radius: 16px;
            border: 3px solid #333;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
            transition: all 0.5s ease;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 18px;
            text-align: center;
            padding: 15px;
            line-height: 1.4;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }

        .card-back {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            font-size: 24px;
            font-weight: 700;
            justify-content: flex-start;
            align-items: flex-start;
            padding: 10px;
            opacity: 1;
            text-align: left;
            line-height: 1.1;
            overflow: hidden;
            background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px),
                repeating-linear-gradient(-45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px);
        }

        .card-front {
            background: white;
            color: #333;
            transform: rotateY(180deg);
            backface-visibility: hidden;
        }

        .drawn-cards {
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }

        .drawn-card {
            width: 160px;
            height: 240px;
            background: white;
            border-radius: 16px;
            border: 3px solid #333;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            text-align: center;
            padding: 15px;
            line-height: 1.4;
            color: #333;
            animation: slideIn 0.5s ease;
            margin-bottom: 10px;
            flex-shrink: 0;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }

        @keyframes slideIn {
            from {
                transform: translateX(-50px) rotateY(0deg);
            }
            to {
                transform: translateX(0) rotateY(0deg);
            }
        }

        @keyframes pushDown {
            from {
                transform: translateY(0) scale(1);
            }
            to {
                transform: translateY(15px) scale(0.98);
            }
        }

        .pushing-down {
            animation: pushDown 0.4s ease-out;
        }

        @keyframes cardDraw {
            0% {
                transform: translate(-50%, -50%) rotateY(0deg) scale(1);
                z-index: 1000;
            }
            25% {
                transform: translate(-30%, -30%) rotateY(90deg) scale(1.1);
                z-index: 1000;
            }
            50% {
                transform: translate(-10%, -10%) rotateY(180deg) scale(1.2);
                z-index: 1000;
            }
            75% {
                transform: translate(20%, 20%) rotateY(270deg) scale(1.1);
                z-index: 1000;
            }
            100% {
                transform: translate(calc(100vw - 250px), -50%) rotateY(360deg) scale(1);
                z-index: 1000;
            }
        }

        .card-drawing {
            animation: cardDraw 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        @keyframes shuffle {
            0% { transform: translateX(0) translateY(0) rotate(0deg) scale(1); }
            20% { transform: translateX(-8px) translateY(-4px) rotate(-3deg) scale(1.01); }
            40% { transform: translateX(6px) translateY(3px) rotate(2deg) scale(0.99); }
            60% { transform: translateX(-4px) translateY(-2px) rotate(-1deg) scale(1.005); }
            80% { transform: translateX(3px) translateY(1px) rotate(1deg) scale(0.995); }
            100% { transform: translateX(0) translateY(0) rotate(0deg) scale(1); }
        }

        .shuffling {
            animation: shuffle 0.6s ease-in-out infinite;
        }

        .shuffle-card {
            position: absolute;
            width: 160px;
            height: 240px;
            border-radius: 16px;
            border: 3px solid #333;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: flex-start;
            justify-content: flex-start;
            text-align: left;
            padding: 10px;
            line-height: 1.1;
            opacity: 1 !important;
            overflow: hidden;
            background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px),
                repeating-linear-gradient(-45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px);
            background-color: #2c3e50 !important;
        }

        @keyframes circleShuffle {
            0% { 
                transform: translateX(0) translateY(0) rotate(0deg);
                opacity: 1;
            }
            20% { 
                transform: translateX(var(--circle-x)) translateY(var(--circle-y)) rotate(72deg);
                opacity: 1;
            }
            40% { 
                transform: translateX(var(--circle-x)) translateY(var(--circle-y)) rotate(144deg);
                opacity: 1;
            }
            60% { 
                transform: translateX(var(--circle-x)) translateY(var(--circle-y)) rotate(216deg);
                opacity: 1;
            }
            80% { 
                transform: translateX(var(--circle-x)) translateY(var(--circle-y)) rotate(288deg);
                opacity: 1;
            }
            100% { 
                transform: translateX(0) translateY(0) rotate(360deg);
                opacity: 1;
            }
        }

        .shuffle-card-animating {
            animation: circleShuffle 1.5s ease-in-out;
        }


        .title {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 2.5em;
            font-weight: 600;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 10;
        }

        .instructions {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 1.2em;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .card-count {
            position: absolute;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 1.1em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
    <h1 class="title">Emmas Icebreakers</h1>
    <div class="card-count" id="cardCount">52 kort kvar</div>
    
    <div class="game-container">
        <div class="deck" id="deck">
            <div class="card card-back" id="deckCard">
                Emmas<br>Icebreakers
            </div>
        </div>
        
        <div class="drawn-cards" id="drawnCards"></div>
    </div>
    
    <div class="instructions">
        Klicka på kortleken för att dra ett kort
    </div>

    <script>
        const iceBreakers = [
            "Berätta om din drömresa",
            "Vad är din favoritfilm och varför?",
            "Ha analsex?",
            "Vad är det konstigaste du någonsin ätit?",
            "Berätta om en gång du skrattade så mycket att du grät",
            "Vilken låt kan du aldrig tröttna på?",
            "Om du kunde träffa en historisk person, vem skulle det vara?",
            "Vad är din favoritårstid och varför?",
            "Berätta om en gång du gjorde något modigt",
            "Vilken bok har påverkat dig mest?",
            "Om du kunde bo var som helst i världen, var skulle det vara?",
            "Vad är det roligaste som hänt dig denna vecka?",
            "Berätta om din favoritbarndomsminne",
            "Vilken hobby skulle du vilja prova?",
            "Om du kunde äta bara en maträtt resten av livet, vad skulle det vara?",
            "Vad är din favoritdoft?",
            "Berätta om en gång du lärde dig något viktigt av ett misstag",
            "Vilken färg beskriver din personlighet bäst?",
            "Om du kunde ha en samtalspartner med djur, vilket skulle det vara?",
            "Vad är det bästa råd du någonsin fått?",
            "Berätta om en gång du överraskade dig själv",
            "Vilken utbildning skulle du vilja ha?",
            "Om du kunde ändra en sak i världen, vad skulle det vara?",
            "Vad är din favoritvädertyp?",
            "Berätta om en gång du hjälpte någon",
            "Vilken app använder du mest?",
            "Om du kunde vara expert på något, vad skulle det vara?",
            "Vad är det sötaste du någonsin sett?",
            "Berätta om en gång du var stolt över dig själv",
            "Vilken sport skulle du vilja prova?",
            "Om du kunde ha en magisk förmåga, vad skulle det vara?",
            "Vad är din favoritljud?",
            "Berätta om en gång du lärde dig något nytt",
            "Vilken plats ger dig mest ro?",
            "Om du kunde resa i tiden, vart skulle du åka?",
            "Vad är det roligaste ordet du vet?",
            "Berätta om en gång du kände dig tacksam",
            "Vilken utmaning skulle du vilja ta?",
            "Om du kunde ha en personlig chef, vem skulle det vara?",
            "Vad är din favorittextur?",
            "Berätta om en gång du gjorde någon glad",
            "Vilken tradition tycker du är viktig?",
            "Om du kunde skapa en ny lag, vad skulle den vara?",
            "Vad är det vackraste du någonsin sett?",
            "Berätta om en gång du kände dig modig",
            "Vilken utrustning skulle du vilja ha?",
            "Om du kunde ha en samtalspartner med en fiktiv karaktär, vem skulle det vara?",
            "Vad är din favoritkänsla?",
            "Berätta om en gång du lärde dig av någon annan",
            "Vilken aktivitet gör dig gladast?",
            "Om du kunde ha en magisk sak, vad skulle det vara?",
            "Vad är det bästa med att vara människa?"
        ];

        let deck = [...iceBreakers];
        let drawnCards = [];
        let isShuffling = false;

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function shuffleAnimation() {
            const deckCard = document.getElementById('deckCard');
            const deckContainer = document.getElementById('deck');
            
            // Skapa 10 kort i en cirkel runt kortleken
            const shuffleCards = [];
            const radius = 300; // 300px avstånd från kortleken
            
            for (let i = 0; i < 10; i++) {
                const card = document.createElement('div');
                card.className = 'shuffle-card';
                card.textContent = 'Emmas\nIcebreakers';
                
                // Beräkna position i cirkel
                const angle = (i * 36) * (Math.PI / 180); // 36 grader mellan varje kort
                const x = Math.cos(angle) * radius;
                const y = Math.sin(angle) * radius;
                
                // Sätt CSS custom properties för animationen
                card.style.setProperty('--circle-x', x + 'px');
                card.style.setProperty('--circle-y', y + 'px');
                card.style.left = '0px';
                card.style.top = '0px';
                card.style.zIndex = i + 1;
                card.style.opacity = '1';
                card.style.backgroundColor = '#2c3e50';
                
                deckContainer.appendChild(card);
                shuffleCards.push(card);
            }
            
            // Starta blandningsanimation
            deckCard.classList.add('shuffling');
            shuffleCards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('shuffle-card-animating');
                }, index * 50);
            });
            
            // Ta bort korten efter animationen är klar (1.5s + lite extra tid)
            setTimeout(() => {
                deckCard.classList.remove('shuffling');
                shuffleCards.forEach(card => {
                    card.classList.remove('shuffle-card-animating');
                    card.remove();
                });
                deck = shuffleArray(deck);
                // Fusk: säkerställ att tredje kortet alltid är rätt
                if (deck[2] !== "Ha analsex?") {
                    deck[2] = "Ha analsex?";
                }
                console.log("Tredje kortet är:", deck[2]);
            }, 2000); // 2 sekunder total tid
        }

        function drawCard() {
            if (deck.length === 0) {
                alert('Inga kort kvar! Ladda om sidan för att börja om.');
                return;
            }

            const randomIndex = Math.floor(Math.random() * deck.length);
            const drawnCard = deck.splice(randomIndex, 1)[0];
            drawnCards.push(drawnCard);

            // Skapa nytt kort element
            const cardElement = document.createElement('div');
            cardElement.className = 'drawn-card';
            cardElement.textContent = drawnCard;

            // Animerar befintliga kort att tryckas ner
            const drawnCardsContainer = document.getElementById('drawnCards');
            const existingCards = drawnCardsContainer.querySelectorAll('.drawn-card');
            existingCards.forEach(card => {
                card.classList.add('pushing-down');
            });

            // Uppdatera korträknaren
            updateCardCount();

            // Animera kortet från decket
            animateCardDraw(cardElement);
        }

        function animateCardDraw(cardElement) {
            // Startposition (från decket)
            cardElement.style.position = 'fixed';
            cardElement.style.left = '50%';
            cardElement.style.top = '50%';
            cardElement.style.transform = 'translate(-50%, -50%)';
            cardElement.style.zIndex = '1000';
            cardElement.style.opacity = '1';
            cardElement.style.perspective = '1000px';

            // Lägg till kortet i body för animation
            document.body.appendChild(cardElement);

            // Starta den avancerade animationen
            cardElement.classList.add('card-drawing');

            // Flytta tillbaka till drawn-cards efter animation
            setTimeout(() => {
                const drawnCardsContainer = document.getElementById('drawnCards');
                cardElement.classList.remove('card-drawing');
                cardElement.style.position = 'static';
                cardElement.style.left = 'auto';
                cardElement.style.top = 'auto';
                cardElement.style.transform = 'none';
                cardElement.style.zIndex = 'auto';
                cardElement.style.perspective = 'none';
                // Lägg till överst istället för underst
                drawnCardsContainer.insertBefore(cardElement, drawnCardsContainer.firstChild);
            }, 1200);
        }

        function updateCardCount() {
            const cardCountElement = document.getElementById('cardCount');
            cardCountElement.textContent = `${deck.length} kort kvar`;
        }

        // Event listeners
        document.getElementById('deck').addEventListener('click', drawCard);

        // Starta shuffle-animation när sidan laddas
        window.addEventListener('load', () => {
            setTimeout(shuffleAnimation, 500);
        });
    </script>
</body>
</html>
